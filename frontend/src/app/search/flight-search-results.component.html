<div class="bg-sky-50 min-h-screen p-4 sm:p-8">
    <!-- Header (can be a shared component) -->
    <header class="w-full max-w-7xl mx-auto bg-sky-600 text-white shadow-lg rounded-xl p-4 sm:p-6 mb-8">
        <div class="flex flex-col sm:flex-row justify-between items-center">
            <div class="text-2xl sm:text-3xl font-bold mb-4 sm:mb-0">Trippy - Find Flights</div>
            <nav>
                <ul class="flex flex-wrap justify-center space-x-3 sm:space-x-6 text-sm sm:text-base">
                    <li><a routerLink="/" class="hover:text-sky-200 transition-colors">Home</a></li>
                    <li><a routerLink="/passenger/dashboard" class="hover:text-sky-200 transition-colors">Dashboard</a>
                    </li>
                    <li><a routerLink="/passenger/settings" class="hover:text-sky-200 transition-colors">Settings</a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="max-w-7xl mx-auto">
        <!-- Search Form Section -->
        <section class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-2xl font-semibold text-sky-700 mb-4">Refine Your Search</h2>
            <form (ngSubmit)="onSearchSubmit()" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
                <div>
                    <label for="from" class="block text-sm font-medium text-gray-700">From</label>
                    <input type="text" id="from" name="from" [(ngModel)]="searchCriteria.from"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500 sm:text-sm"
                        placeholder="City or Airport">
                </div>
                <div>
                    <label for="to" class="block text-sm font-medium text-gray-700">To</label>
                    <input type="text" id="to" name="to" [(ngModel)]="searchCriteria.to"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500 sm:text-sm"
                        placeholder="City or Airport">
                </div>
                <div>
                    <label for="departureDate" class="block text-sm font-medium text-gray-700">Departure Date</label>
                    <input type="date" id="departureDate" name="departureDate"
                        [(ngModel)]="searchCriteria.departureDate"
                        class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500 sm:text-sm">
                </div>
                <!-- Add other fields like Return Date if needed -->
                <button type="submit"
                    class="w-full lg:w-auto bg-orange-500 text-white py-2.5 px-6 rounded-md font-semibold hover:bg-orange-600 transition-colors duration-200 text-sm focus:outline-none focus:ring-2 focus:ring-orange-400 focus:ring-opacity-75">
                    Search
                </button>
            </form>
        </section>

        <!-- Filters and Sorting Section -->
        <section class="bg-white p-6 rounded-lg shadow-md mb-8">
            <div class="flex flex-col md:flex-row justify-between items-center mb-4">
                <h3 class="text-xl font-semibold text-sky-700 mb-3 md:mb-0">Filter & Sort Results</h3>
                <div class="flex space-x-4 items-center">
                    <label for="sortOptions" class="text-sm font-medium text-gray-700">Sort by:</label>
                    <select id="sortOptions" name="sortOptions" [(ngModel)]="sortOption" (ngModelChange)="sortResults()"
                        class="block w-full md:w-auto pl-3 pr-8 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm">
                        <option value="price_asc">Price (Low to High)</option>
                        <option value="price_desc">Price (High to Low)</option>
                        <option value="duration_asc">Duration (Shortest)</option>
                        <option value="departure_asc">Departure Time (Earliest)</option>
                    </select>
                </div>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                <div>
                    <label for="maxPrice" class="block text-sm font-medium text-gray-700">Max Price: ${{
                        filters.maxPrice }}</label>
                    <input type="range" id="maxPrice" name="maxPrice" min="50" max="2000" step="10"
                        [(ngModel)]="filters.maxPrice" (ngModelChange)="applyFilters()"
                        class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-sky-600">
                </div>
                <div>
                    <label for="stops" class="block text-sm font-medium text-gray-700">Stops</label>
                    <select id="stops" name="stops" [(ngModel)]="filters.stops" (ngModelChange)="applyFilters()"
                        class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm rounded-md">
                        <option value="any">Any</option>
                        <option value="0">Non-stop</option>
                        <option value="1">1 Stop</option>
                    </select>
                </div>
                <div>
                    <label for="duration" class="block text-sm font-medium text-gray-700">Max Duration (hrs): {{
                        filters.maxDuration }}</label>
                    <input type="range" id="duration" name="duration" min="1" max="24" step="1"
                        [(ngModel)]="filters.maxDuration" (ngModelChange)="applyFilters()"
                        class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-sky-600">
                </div>
            </div>
        </section>

        <!-- Flight Results Section -->
        <section>
            <h2 class="text-2xl font-semibold text-sky-800 mb-4" *ngIf="filteredFlights.length > 0">{{
                filteredFlights.length }} flights found</h2>
            <div *ngIf="isLoading" class="text-center py-10">
                <p class="text-sky-600 font-semibold">Loading flights...</p>
                <!-- You can add a spinner SVG here -->
            </div>
            <div *ngIf="!isLoading && filteredFlights.length === 0 && searchPerformed"
                class="bg-white p-6 rounded-lg shadow-md text-center text-gray-600">
                No flights found matching your criteria. Try adjusting your search or filters.
            </div>
            <div class="space-y-4">
                <!-- Repeat this block for each flight result -->
                <div *ngFor="let flight of filteredFlights"
                    class="bg-white p-4 sm:p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-center">
                        <div class="md:col-span-3">
                            <div class="flex items-center mb-2">
                                <img [src]="'https://logo.clearbit.com/' + flight.airline.toLowerCase().replace(' ', '') + '.com?size=40'"
                                    onError="this.src='https://via.placeholder.com/40?text=AL'"
                                    alt="{{flight.airline}} logo"
                                    class="w-8 h-8 mr-3 rounded-full object-contain border">
                                <span class="font-semibold text-sky-700">{{ flight.airline }}</span>
                            </div>
                            <div class="flex flex-col sm:flex-row justify-between items-baseline">
                                <div>
                                    <p class="text-lg font-bold">{{ flight.departureTime }} <span
                                            class="text-sm font-normal text-gray-600">({{ flight.fromCode }})</span></p>
                                    <p class="text-xs text-gray-500">{{ flight.departureDate }}</p>
                                </div>
                                <div class="my-2 sm:my-0 sm:mx-4 text-center">
                                    <span class="text-xs text-gray-500 block">{{ flight.duration }}</span>
                                    <div class="w-full h-px bg-gray-300 my-0.5 relative">
                                        <span
                                            class="absolute left-0 top-1/2 -mt-1 w-2 h-2 bg-gray-400 rounded-full"></span>
                                        <span
                                            class="absolute right-0 top-1/2 -mt-1 w-2 h-2 bg-gray-400 rounded-full"></span>
                                    </div>
                                    <span class="text-xs text-sky-600 block">{{ flight.stops === 0 ? 'Non-stop' :
                                        flight.stops + ' stop(s)' }}</span>
                                </div>
                                <div>
                                    <p class="text-lg font-bold">{{ flight.arrivalTime }} <span
                                            class="text-sm font-normal text-gray-600">({{ flight.toCode }})</span></p>
                                    <p class="text-xs text-gray-500">{{ flight.arrivalDate }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="md:col-span-1 text-center md:text-right">
                            <p class="text-2xl font-bold text-orange-600">${{ flight.price.toFixed(2) }}</p>
                            <p class="text-xs text-gray-500 mb-2">Economy, per adult</p>
                            <p class="text-xs text-green-600 mb-2" *ngIf="flight.seatsAvailable > 0">{{
                                flight.seatsAvailable }} seats available</p>
                            <p class="text-xs text-red-600 mb-2" *ngIf="flight.seatsAvailable === 0">Sold out</p>
                            <button (click)="selectFlight(flight.id)" [disabled]="flight.seatsAvailable === 0"
                                class="w-full bg-sky-600 text-white px-4 py-2 rounded-md hover:bg-sky-700 transition-colors focus:outline-none focus:ring-2 focus:ring-sky-400 disabled:opacity-50 disabled:cursor-not-allowed">
                                Select Flight
                            </button>
                        </div>
                    </div>
                </div>
                <!-- End flight result block -->
            </div>
        </section>
    </div>
</div>